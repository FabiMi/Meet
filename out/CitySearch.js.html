<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: CitySearch.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: CitySearch.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from 'react';
import { InfoAlert } from './Alert';

class CitySearch extends Component {
  state = {
    query: '',
    suggestions: [],
    showSuggestions: undefined
  }


/**
 * @description handleInputChanged function handles the input change event. It will update the query state and showSuggestions state. It will also filter the suggestions based on the query.
 * @param {*} event 
 * @returns  {string} value
 */


  handleInputChanged = (event) => {
    const value = event.target.value;
    let suggestions = [];
    if (Array.isArray(this.props.locations)) {
      suggestions = this.props.locations.filter((location) => {
        return location.toUpperCase().indexOf(value.toUpperCase()) > -1;
      });
    }
    if (suggestions.length === 0) {
      this.setState({
        query: value,
        infoText: 'We can not find the city you are looking for. Please try another city',
      });
    } else {
      return this.setState({
        query: value,
        suggestions,
        infoText:''
      });
    }
  };

/** 
 *  @description handleItemClicked function handles the click event on the suggestion list. It will update the query state and showSuggestions state. It will also call the updateEvents function to update the events list.
 * @param {*} suggestion
 * @returns {string} suggestion
 */
 


  handleItemClicked = (suggestion) => {
    this.setState({
      query: suggestion,
      showSuggestions: false,
      infoText:''
    });
  
    this.props.updateEvents(suggestion);
  }

  render() {
    return (
      &lt;div className="CitySearch">
        &lt;InfoAlert text={this.state.infoText} />
        &lt;input
          type="text"
          className="city"
          value={this.state.query}
          onChange={this.handleInputChanged}
          placeholder="Search for location..."
          onFocus={() => {
            this.setState({ showSuggestions: true });
          }}
        />
        &lt;ul
          className="suggestions"
          style={this.state.showSuggestions ? {} : { display: "none" }}
        >
          {this.state.suggestions.map((suggestion) => (
            &lt;li
              key={suggestion}
              onClick={() => this.handleItemClicked(suggestion)}
            >
              {suggestion}
            &lt;/li>
          ))}
          &lt;li onClick={() => this.handleItemClicked("all")}>
            &lt;b>See all cities&lt;/b>
          &lt;/li>
        &lt;/ul>
      &lt;/div>
    );
  }
}
export default CitySearch;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="InfoAlert.html">InfoAlert</a></li></ul><h3>Global</h3><ul><li><a href="global.html#checkToken">checkToken</a></li><li><a href="global.html#getAccessToken">getAccessToken</a></li><li><a href="global.html#getEvents">getEvents</a></li><li><a href="global.html#getToken">getToken</a></li><li><a href="global.html#removeQuery">removeQuery</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Jul 20 2023 15:27:56 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
